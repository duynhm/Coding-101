### Bài 39: Tính $S(n) = \sqrt{n! + \sqrt{(n-1)! + \ldots + \sqrt[3]{\frac{n}{n+1}}}}$ có $n$ dấu căn

---

### **1. Lưu đồ**

```mermaid
graph TD
    A((Bắt đầu)) --> B[/n/];
    B --> C[S = cbrt(n/(n+1))];
    C --> D[i = 1];
    D --> E{i <= n?};
    E -- Sai --> H[/Xuất S/];
    E -- Đúng --> F[fact = factorial(n-i+1)];
    F --> G[S = sqrt(fact + S)];
    G --> I[i = i + 1];
    I --> E;
    H --> J((Kết thúc));
```

---

### **2. Test Case**

- **Đầu vào (Input):** `n = 3`

- **Kết quả mong đợi (Expected Result):** `S(3) ≈ 2.646`


**Mô phỏng (Simulation):**

`n = 3`
Bắt đầu với `S = cbrt(3/4) ≈ 0.908`
Sau đó tính sqrt(1! + S), sqrt(2! + sqrt(1! + S)), sqrt(3! + sqrt(2! + sqrt(1! + S)))

---

### **3. Code**

#### **Python**

```python
import math

def tinh_giai_thua(n):
    # Hàm tính giai thừa của n
    if n <= 1:
        return 1
    giai_thua = 1
    i = 1
    while i <= n:
        giai_thua = giai_thua * i
        i = i + 1
    return giai_thua

def tinh_S_giai_thua_can_bac_3(n):
    # Khởi tạo S với căn bậc 3 của n/(n+1)
    S = math.pow(n / (n + 1), 1/3)
    # Khởi tạo biến đếm i bắt đầu từ 1
    i = 1
    # Vòng lặp while sẽ chạy n lần
    while i <= n:
        # Tính giai thừa của (n-i+1)
        fact = tinh_giai_thua(n - i + 1)
        # Tính căn bậc hai của (fact + S)
        S = math.sqrt(fact + S)
        # Tăng biến đếm i lên 1 đơn vị
        i = i + 1
    return S

# Chương trình chính
n = int(input("Nhập vào số nguyên dương n: "))
ket_qua = tinh_S_giai_thua_can_bac_3(n)
print(f"S({n}) = {ket_qua:.6f}")
```

#### **JavaScript**

```javascript
function tinhGiaiThua(n) {
    // Hàm tính giai thừa của n
    if (n <= 1) {
        return 1;
    }
    let giaiThua = 1;
    let i = 1;
    while (i <= n) {
        giaiThua = giaiThua * i;
        i = i + 1;
    }
    return giaiThua;
}

function tinhSGiaiThuaCanBac3(n) {
    // Khởi tạo S với căn bậc 3 của n/(n+1)
    let S = Math.pow(n / (n + 1), 1/3);
    // Khởi tạo biến đếm i bắt đầu từ 1
    let i = 1;
    // Vòng lặp while sẽ chạy n lần
    while (i <= n) {
        // Tính giai thừa của (n-i+1)
        let fact = tinhGiaiThua(n - i + 1);
        // Tính căn bậc hai của (fact + S)
        S = Math.sqrt(fact + S);
        // Tăng biến đếm i lên 1 đơn vị
        i = i + 1;
    }
    return S;
}

// Chương trình chính
let n = parseInt(prompt("Nhập vào số nguyên dương n:"));
let ketQua = tinhSGiaiThuaCanBac3(n);
console.log(`S(${n}) = ${ketQua.toFixed(6)}`);
alert(`S(${n}) = ${ketQua.toFixed(6)}`);
```